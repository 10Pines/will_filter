<style>
.mf_fieldset {
	
}

.mf_button {
	
}

.mf_dirty_msg {
	<%='display:none;' unless @model_filter.errors? %> 
	color:red; 
	font-size:9px;
}
</style>

<fieldset class="mf_fieldset">
    <legend>
        <b><%=@model_filter.label_for(:title)%></b>
        <span id="filter_dirty" class="mf_dirty_msg">
        	<%=@model_filter.label_for(:msg_filter_changed)%>
        </span>
    </legend>
    <% form_tag({:controller=>params["controller"], :action => params["action"]}, {:method => :get, :name=>'mf_form', :id => 'mf_form'}) do %>
	    <%=hidden_field_tag(ModelFilter::HTML[:type], @model_filter.class.name) %>
	    <div>
	        <div id="filter_container" style="display:inline">
	            <div id="filter">
	                <%= render :partial=> "/model_filter/filter_conditions" %>
	            </div>
	            <table width="100%">
	                <tr>
	                    <td align="left" style="padding:5px;">
	                        <input type="button" value="<%=@model_filter.label_for(:btn_add_condition)%>" id="addBtn" 		onClick="performFilterAction('addConditionLast')" class="mf_button">
													<input type="button" value="<%=@model_filter.label_for(:btn_clear)%>" 								id="clearBtn" onClick="performFilterAction('clear')" 											class="mf_button">&nbsp;&nbsp;
	                        <div id="loader_icon" style="display:none; font-size:10px;">
	                            <%=image_tag "/images/spinner.gif", {:style=>"vertical-align:middle"} %> <%=@model_filter.label_for(:msg_loading)%>
	                        </div>
	                    </td>
	                    <td style="padding:5px;text-align:right">
	                        <% if @own_profile.admin? %>
	                        <%=link_to_function("SQL Conditions", "toggleSQLConditions()", :style=>"font-size:9px") %>
	                        <% end %>
	                        &nbsp;&nbsp;
													<input type="button" value="<%=@model_filter.label_for(:btn_delete)%>" id="filterDeleteBtn" onClick="deleteFilter()" 															class="mf_button">&nbsp;
													<input type="button" value="<%=@model_filter.label_for(:btn_update)%>" id="filterUpdateBtn" onClick="updateFilter()" 															class="mf_button">&nbsp;
													<input type="button" value="<%=@model_filter.label_for(:btn_save)%>" 		id="filterSaveAsBtn" onClick="saveFilter()" 																	class="mf_button">&nbsp;
													<input type="button" value="<%=@model_filter.label_for(:btn_search)%>" id="filterSearchBtn" onClick="performFilterAction('submit')" class="mf_button">&nbsp;
	                    </td>
	                </tr>
	            </table>
	            <div id="sql_conditions" style="display:none;">
	                <table style="border:1px solid black; width:100%">
	                    <tr>
	                        <td style="font-size:10px; padding:5px">
	                            <%= @model_filter.debug_sql_conditions %>
	                        </td>
	                    </tr>
	                </table>
	            </div>
	        </div>
	    </div>
    <% end %>
</fieldset>
